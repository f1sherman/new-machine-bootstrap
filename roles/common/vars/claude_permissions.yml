---
# Claude Code permission rules
# These are merged into ~/.claude/settings.json during provisioning
# Syntax: "Tool(command *)" for wildcards, "Tool(exact)" for exact match

claude_permissions:
  allow:
    # Ansible
    - "Bash(ansible *)"
    - "Bash(ansible-playbook *)"

    # Shell utilities
    - "Bash(awk *)"
    - "Bash(bash *)"
    - "Bash(cat *)"
    - "Bash(cd *)"
    - "Bash(chmod *)"
    - "Bash(cp *)"
    - "Bash(curl *)"
    - "Bash(cut *)"
    - "Bash(date *)"
    - "Bash(diff *)"
    - "Bash(dig *)"
    - "Bash(echo *)"
    - "Bash(env *)"
    - "Bash(file *)"
    - "Bash(find *)"
    - "Bash(for *)"
    - "Bash(grep *)"
    - "Bash(head *)"
    - "Bash(jq *)"
    - "Bash(ls *)"
    - "Bash(mkdir *)"
    - "Bash(mv *)"
    - "Bash(pwd)"
    - "Bash(rg *)"
    - "Bash(rm *)"
    - "Bash(rsync *)"
    - "Bash(scp *)"
    - "Bash(sed *)"
    - "Bash(sort *)"
    - "Bash(source *)"
    - "Bash(ssh *)"
    - "Bash(tail *)"
    - "Bash(test *)"
    - "Bash(timeout *)"
    - "Bash(touch *)"
    - "Bash(tr *)"
    - "Bash(type *)"
    - "Bash(uniq *)"
    - "Bash(wc *)"
    - "Bash(which *)"
    - "Bash(xargs *)"
    - "Bash(yamllint *)"
    - "Bash(yq *)"

    # Git operations
    - "Bash(git add *)"
    - "Bash(git branch *)"
    - "Bash(git check-ignore *)"
    - "Bash(git checkout *)"
    - "Bash(git cherry-pick *)"
    - "Bash(git clean *)"
    - "Bash(git diff *)"
    - "Bash(git fetch *)"
    - "Bash(git log *)"
    - "Bash(git merge *)"
    - "Bash(git mv *)"
    - "Bash(git pull *)"
    - "Bash(git rebase *)"
    - "Bash(git reset *)"
    - "Bash(git restore *)"
    - "Bash(git rev-parse *)"
    - "Bash(git show *)"
    - "Bash(git stash *)"
    - "Bash(git status *)"
    - "Bash(git switch *)"
    - "Bash(git-changed-files *)"

    # GitHub CLI
    - "Bash(gh api *)"
    - "Bash(gh codespace *)"
    - "Bash(gh issue *)"
    - "Bash(gh pr *)"
    - "Bash(gh repo *)"
    - "Bash(gh run *)"
    - "Bash(gh workflow *)"

    # Docker
    - "Bash(docker compose exec *)"
    - "Bash(docker rm *)"
    - "Bash(docker start *)"
    - "Bash(docker stop *)"

    # Ruby/Rails
    - "Bash(bin/bundle *)"
    - "Bash(bin/restart *)"
    - "Bash(bin/rspec *)"
    - "Bash(bin/rubocop *)"
    - "Bash(bin/setup *)"
    - "Bash(bundle graph *)"
    - "Bash(bundle info *)"
    - "Bash(bundle show *)"
    - "Bash(bundle update *)"

    # Bootstrap scripts
    - "Bash(bin/codespace-create *)"
    - "Bash(bin/codespace-ssh *)"
    - "Bash(bin/provision --check *)"
    - "Bash(bin/provision --diff *)"
    - "Bash(bin/sync-to-codespace *)"

    # Claude skills
    - "Bash(~/bin/spec-metadata)"
    - "Bash(~/.claude/skills/create-pull-request/create-draft-pr *)"
    - "Bash(~/.claude/skills/create-pull-request/gather-pr-context *)"

    # File reads
    - "Read(//Users/brianjohn/projects/github-actions/pull-request-review/**)"

    # Web access
    - "WebFetch(domain:api.rubyonrails.org)"
    - "WebFetch(domain:docs.anthropic.com)"
    - "WebFetch(domain:docs.datadoghq.com)"
    - "WebFetch(domain:docs.github.com)"
    - "WebFetch(domain:github.com)"
    - "WebFetch(domain:guides.rubyonrails.org)"
    - "WebSearch"

    # MCP tools
    - "mcp__atlassian__createJiraIssue"
    - "mcp__atlassian__getAccessibleAtlassianResources"
    - "mcp__atlassian__getVisibleJiraProjects"
    - "mcp__atlassian__lookupJiraAccountId"
    - "mcp__postgresql__query"

  deny:
    # Require explicit approval for commits (per CLAUDE.md)
    - "Bash(git commit *)"
    # Prevent accidental force pushes
    - "Bash(git push --force *)"
    - "Bash(git push -f *)"
